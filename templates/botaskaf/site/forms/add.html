{# SPDX-FileCopyrightText: (C) 2024 Matthias Fehring <https://www.huessenbergnetz.de> #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% with site_title as page_title %}
{% include "forms/add_header.html" %}
{% endwith %}

{% if hbnbota_error.isError %}
<div class="mt-3">
    {% include "parts/erroralert.html" %}
</div>
{% endif %}

<form {{ form.attrs|safe }}>
    {% c_csrf_token %}
    {% with form.fieldsetById as fieldsetsById %}
        {% with fieldsetsById.addFormGeneral as fs %}
        <fieldset class="row mb-3">
            <legend>{{ fs.legend }}</legend>
            {% with fs.fieldById as fieldsById %}
                {% with fieldsById.name as field %}
                <div class="col-12 col-md-6 mb-3">
                    {% include "cutelystforms/fieldwithlabel.html" %}
                </div>
                {% endwith %}

                {% with fieldsById.domain as field %}
                <div class="col-12 col-md-6 mb-3">
                    {% include "cutelystforms/fieldwithlabel.html" %}
                </div>
                {% endwith %}

                {% with fieldsById.description as field %}
                <div class="col-12 mb-3">
                    {% include "cutelystforms/fieldwithlabel.html" %}
                </div>
                {% endwith %}
            {% endwith %}
        </fieldset>
        {% endwith %}

        {% with fieldsetsById.addFormFields as fs %}
        <fieldset class="row mb-3">
            <legend>{{ fs.legend }}</legend>
            {% with fs.fieldById as fields %}
                {% with fields.formFieldSenderNameRequired as checkbox %}
                {% with fields.formFieldSenderName as field %}
                <div class="col-12 col-md-6 mb-3">
                    {% include "parts/inputwithcheckboxandlabel.html" %}
                </div>
                {% endwith %}
                {% endwith %}

                {% with fields.formFieldSenderEmailRequired as checkbox %}
                {% with fields.formFieldSenderEmail as field %}
                <div class="col-12 col-md-6 mb-3">
                    {% include "parts/inputwithcheckboxandlabel.html" %}
                </div>
                {% endwith %}
                {% endwith %}

                {% with fields.formFieldSenderPhoneRequired as checkbox %}
                {% with fields.formFieldSenderPhone as field %}
                <div class="col-12 col-md-6 mb-3">
                    {% include "parts/inputwithcheckboxandlabel.html" %}
                </div>
                {% endwith %}
                {% endwith %}

                {% with fields.formFieldSenderUrlRequired as checkbox %}
                {% with fields.formFieldSenderUrl as field %}
                <div class="col-12 col-md-6 mb-3">
                    {% include "parts/inputwithcheckboxandlabel.html" %}
                </div>
                {% endwith %}
                {% endwith %}

                {% with fields.formFieldSubjectRequired as checkbox %}
                {% with fields.formFieldSubject as field %}
                <div class="col-12 col-md-6 mb-3">
                    {% include "parts/inputwithcheckboxandlabel.html" %}
                </div>
                {% endwith %}
                {% endwith %}

                {% with fields.formFieldContentRequired as checkbox %}
                {% with fields.formFieldContent as field %}
                <div class="col-12 col-md-6 mb-3">
                    {% include "parts/inputwithcheckboxandlabel.html" %}
                </div>
                {% endwith %}
                {% endwith %}
            {% endwith %}
        </fieldset>
        {% endwith %}

        {% with fieldsetsById.addFormHoneypots as fs %}
        <fieldset class="row mb-3">
            <legend>{{ fs.legend }}</legend>

            {% with fs.fieldById.honeypots as field %}
            <div class="col-12 mb-3">
                {% include "cutelystforms/field.html" %}
            </div>
            {% endwith %}
        </fieldset>
        {% endwith %}

        {% with fieldsetsById.addFormSender as fs %}
        <fieldset class="row">
            <legend>{{ fs.legend }}</legend>

            {% for field in fs.fieldList %}
            <div class="col-12 col-md-6 mb-3">
                {% include "cutelystforms/fieldwithlabel.html" %}
            </div>
            {% endfor %}
        </fieldset>
        {% endwith %}
    {% endwith %}
</form>
